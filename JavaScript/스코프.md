## 스코프란?

스코프는 유효 범위라는 뜻으로, 변수가 접근할 수 있는 범위를 말함


자바스크립트 엔진은 스코프를 통해 어떤 변수를 참조해야 할 것인지 결정함

## 스코프의 종류

모든 변수는 스코프를 갖는다. 

크게 전역(global) 스코프와 지역(local) 스코프로 구분됨

전역 스코프(Global Scope)는 말 그대로 전역에 선언되어있어 어느 곳에서든지 해당 변수에 접근할 수 있다는 의미함

```
let x = 'global';

function foo() {
    console.log(x);
}

foo()          // global
console.log(x) // global
```

지역 스코프(Local Scope)는 해당 지역에서만 접근할 수 있어 지역을 벗어난 곳에선 접근할 수 없다는 의미함

```
let x = 'global';

function foo() {
    let x = 'local';
    console.log(x);
}

foo()          // local
console.log(x) // global
```

## 자바스크립트 스코프의 특징

함수 레벨 스코프와 블록 레벨 스코프가 있음

ES5 자바스크립트는 함수 레벨 스코프를 따름
ES6 이후 도입된 let,const를 사용하면 블록 레벨 스코르를 사용할 수 있음

## 함수 레벨 스코프란?

함수 코드 블록 내에서 선언된 변수는 함수 코드 블록 내에서만 유효하고 함수 외부에서는 유효하지 않다(참조할 수 없다)는 것


## 블록 레벨 스코프란?

코드 블록({…})내에서 유효한 스코프를 의미함 여기서 “유효하다”라는 것은 “참조(접근)할 수 있다”라는 뜻

------


프로그래밍 언어는 이 두가지 방식 중 하나의 방식으로 함수의 상위 스코프를 결정한다. 
첫번째 방식을 동적 스코프(Dynamic scope)라 하고, 
두번째 방식을 렉시컬 스코프(Lexical scope) 또는 정적 스코프(Static scope)라 한다. 

자바스크립트를 비롯한 대부분의 프로그래밍 언어는 렉시컬 스코프를 따른다.


## 렉시컬 스코프란?

렉시컬 스코프는 함수를 어디서 호출하는지가 아니라 어디에 선언하였는지에 따라 결정됨

```
var x = 1;

function foo() {
  var x = 10;
  bar();
}

function bar() {
  console.log(x);
}

foo(); // ?
bar(); // ?
```

위의 bar함수는 전역에 선언되었기 때문에 bar함수는 전역 스코프이고 위 예제는 전역 변수 x의 값 1을 두번 출력됨

소스코드의 실행에 있어서 foo 함수 내부에서 bar 함수를 '호출' 하더라도
bar 함수는 foo 함수와 동일한 스코프인 전역 스코프에 '정의'되어 있기 때문에 foo 함수 내부의 x=10을 참조할 수 없음




## 암묵적 전역 (implicit global)

```
var x = 10; // 전역 변수

function foo () {
  // 선언하지 않은 식별자
  y = 20;
  console.log(x + y);
}

foo(); // 30
```

foo()라는 함수가 호출되면 자바스크립트 엔진은 y에 값을 할당하기 위해 스코프 체인을 통해 선언된 변수인지 확인을 합니다! 근데 어느곳에서도 y라는 변수는 선언되지 않았으므로 참조 에러가 발생하는게 맞지만, 자바스크립트 엔진은 window.y 로 해석하여 프로퍼티를 동적으로 생성함

따라서 y는 변수가 아니라 전역 객체(window)의 프로퍼티로 추가가 되었을 뿐이고, 변수 호이스팅이 발생하지 않음

따라서 y 변수가 선언되지 않고도 에러가 안뜨는 이유는 전역 객체의 프로퍼티가 되기 떄문

